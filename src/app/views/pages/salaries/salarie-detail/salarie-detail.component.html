<tf-portlet class="tf-portlet--height-fluid mat-elevation-z8" id="portlet-salarie" *ngIf="salarie">
    <div class="tf-portlet-header ">
      <span class="title">
        <a [routerLink]="['/salaries/list']">{{'MENU.SUB_SALARIES.LIST' | translate}}</a><span class="divider">></span><span class="id-item">{{salarie | fullName}}</span>
      </span>
    </div>
    <tf-portlet-body class="tf-portlet__body--fit">
      <div class="row">
        <div class="col-md-3">
            <div class="card">
              <div class="box" style="flex:1">
                    <!-- TODO photo -->
              </div>
              <div class="tf-divider">
                <span></span>
              </div>
              <div class="box box-coords" style="flex:1">
                <h5><b>À propos du salarié</b></h5>
                <p><span class="label pull-left mr-2">{{'COMMON.LASTNAME.LABEL' | translate}}</span><span class="">{{salarie.nom}}</span></p>
                <p><span class="label pull-left mr-2">{{'COMMON.FIRSTNAME.LABEL' | translate}}</span><span class="">{{salarie.prenom}}</span></p>
                <p><span class="label pull-left mr-2">{{'COMMON.BIRTHDAY.LABEL' | translate}}</span><span class="">{{salarie.created_at | date:'dd/MM/yyyy'}}</span></p>
                <p><span class="label pull-left mr-2">{{'COMMON.FONCTION.LABEL' | translate}}</span><span class="">{{salarie.fonction?.libelle}}</span></p>
              </div>
              <div class="tf-divider">
                <span></span>
              </div>
              <div class="box text-center">
                <small>{{'SALARIES.ENTRY_AT.LABEL' | translate}} : {{salarie.date_entree | date:'dd/MM/yyyy'}}</small><br>
              </div>
            </div>
        </div>

        <div class="col-md-9">
            <div class="col-md-12 d-flex">
                <div class="col-md-4 d-flex">
                    <div class="row d-flex flex-column flex-nowrap flex-fill">
                    <div class="col-12 flex-fill" >
                        <div class="card">
                            <h5><b>Outillage</b></h5>
                            <div class="box text-center">

                            </div>
                            <div class="tf-divider">
                                <span></span>
                            </div>
                            <div class="box box-coords" style="flex:1">
            
                            </div>
                        </div>
                    </div>
                    <div class="col-12 mt-4 flex-fill" >
                        <div class="card">
                            <h5><b>Formation</b></h5>
                            <div class="box text-center">

                            </div>
                            <div class="tf-divider">
                                <span></span>
                            </div>
                            <div class="box box-coords" style="flex:1">

                            </div>
                        </div>
                    </div>
                    </div>
                </div>

                <div class="col-md-4 d-flex">
                    <div class="row d-flex flex-column flex-nowrap flex-fill">
                    <div class="col-12 flex-fill" >
                        <div class="card">
                            <h5><b>Accidentologie</b></h5>
                            <div class="box text-center">

                            </div>
                            <div class="tf-divider">
                                <span></span>
                            </div>
                            <div class="box box-coords" style="flex:1">
            
                            </div>
                        </div>
                    </div>
                    <div class="col-12 mt-4 flex-fill" >
                        <div class="card">
                            <h5><b>EPI</b></h5>
                            <div class="box text-center">

                            </div>
                            <div class="tf-divider">
                                <span></span>
                            </div>
                            <div class="box box-coords" style="flex:1">

                            </div>
                        </div>
                    </div>
                    </div>
                </div>

                <div class="col-md-4 d-flex">
                    <div class="row d-flex flex-column flex-nowrap flex-fill">
                    <div class="col-12 flex-fill" >
                        <div class="card">
                            <h5><b>Animation HSE</b></h5>
                            <div class="box text-center">

                            </div>
                            <div class="tf-divider">
                                <span></span>
                            </div>
                            <div class="box box-coords" style="flex:1">
            
                            </div>
                        </div>
                    </div>
                    <div class="col-12 mt-4 flex-fill" >
                        <div class="card">
                            <h5><b>Véhicule</b></h5>
                            <div class="box text-center">

                            </div>
                            <div class="tf-divider">
                                <span></span>
                            </div>
                            <div class="box box-coords" style="flex:1">

                            </div>
                        </div>
                    </div>
                    </div>
                </div>
            </div>

            <div class="col-md-12">
                <div class="col-md-12 mt-4">
                    <div class="card">
                        <h5><b>Information employeur</b></h5>
                        <div class="row d-flex">
                            <div class="box box-ar-vs col-md-3">
                                <h6><b>En cas d'urgence</b></h6>
                                <div class="tf-divider"><span></span></div>
                                <div class="box box-coords" style="flex:1">
                                    <p><span class="label pull-left mr-2">{{'COMMON.LASTNAME.LABEL' | translate}}</span><span class="" *ngIf="salarie.nom_urgence; else noDataFound">{{salarie.nom_urgence}}</span></p>
                                    <p><span class="label pull-left mr-2">Téléphone</span><span class="" *ngIf="salarie.telephone_urgence; else noDataFound">{{salarie.telephone_urgence}}</span></p>
                                    <p><span class="label pull-left mr-2">Lien parente</span><span class="" *ngIf="salarie.lien_parente_urgence; else noDataFound">{{salarie.lien_parente_urgence}}</span></p>
                                </div>
                            </div>
                            <div class="box box-ar-vs col-md-3">
                                <h6><b>Visite médicale</b></h6>
                                <div class="tf-divider"><span></span></div>
                                <div class="box box-coords" style="flex:1">
                                    <p><span class="label pull-left mr-2">RQTH</span><span class="" *ngIf="salarie.nom_urgence; else noDataFound">{{salarie.nom_urgence}}</span></p>
                                    <p><span class="label pull-left mr-2">Réalisée</span><span class="" *ngIf="salarie.latest_visite_medicale?.date_rv; else noDataFound">{{salarie.latest_visite_medicale?.date_rv | date:'dd/MM/yyyy'}}</span></p>
                                    <p><span class="label pull-left mr-2">À renouveler</span><span class="" *ngIf="salarie.lien_parente_urgence; else noDataFound">{{salarie.lien_parente_urgence}}</span></p>
                                </div>
                            </div>
                            <div class="box box-ar-vs col-md-3">
                                <h6><b>Ouvrage concerné</b></h6>
                                <div class="tf-divider"><span></span></div>
                                <div class="px-5">

                                </div>
                            </div>
                            <div class="box box-ar-vs col-md-3">
                                <h6><b>Indications complémentaires</b></h6>
                                <div class="tf-divider"><span></span></div>
                                <div class="px-5">

                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-12 mt-4">
                    <div class="card">
                        <h5><b>Équipements du salarié</b></h5>
                        <div class="row d-flex">
                            <div class="box box-ar-vs col-md-6">
                                <h6><b>EPI a transmettre au salarié</b></h6>
                                <div class="tf-divider"><span></span></div>
                                <div class="px-5">

                                </div>
                            </div>
                            <div class="box box-ar-vs col-md-6">
                                <h6><b>Outillage</b></h6>
                                <div class="tf-divider"><span></span></div>
                                <div class="px-5">

                                </div>
                            </div>
                            <div class="box box-ar-vs col-md-6">
                                <h6><b>Véhicule</b></h6>
                                <div class="tf-divider"><span></span></div>
                                <div class="px-5">

                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-12 mt-4">
                    <div class="card">
                        <h5><b>Aptitudes</b></h5>
                        <div class="row d-flex">
                            <div class="box box-ar-vs col-md-6">
                                <h6><b>Accidentologie et maladie</b></h6>
                                <div class="tf-divider"><span></span></div>
                                <div class="px-5">

                                </div>
                            </div>
                            <div class="box box-ar-vs col-md-6">
                                <h6><b>Animation HSE</b></h6>
                                <div class="tf-divider"><span></span></div>
                                <div class="px-5">

                                </div>
                            </div>
                            <div class="box box-ar-vs col-md-6">
                                <h6><b>Coût HSE du salarié</b></h6>
                                <div class="tf-divider"><span></span></div>
                                <div class="px-5">

                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-12 mt-4">
                    <div class="card">
                        <h5><b>Formations</b></h5>
                        <div class="box box-ar-vs" style="flex: 1;">
                            <h6><b>Suivis des formations</b><small class="pull-right">{{'COMMON.UPDATED_AT.TITLE' | translate}} : <span class="blue">10/10/2020</span></small></h6>
                            <div class="tf-divider"><span></span></div>
                            <div class="px-5">
                                <table class="table table-borderless table-sm table-striped px-4">
                                    <thead>
                                    <tr>
                                        <th scope="col">Formations</th>
                                        <th class="text-center" scope="col">Date de réalisation</th>
                                        <th class="text-center" scope="col">Date de renouvellement</th>
                                        <th class="text-center" scope="col">Autorisation employeur</th>
                                        <th class="text-center" scope="col">Aptitudes</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr *ngFor="let formation of salarie.formations" >
                                        <th scope="row">{{formation.libelle}}</th>
                                        <td class="text-center">{{formation.date_debut | date:'dd/MM/yyyy'}}</td>
                                        <td class="text-center">{{formation.date_fin | date:'dd/MM/yyyy'}}</td>
                                        <td class="text-center">{{formation.date | date:'dd/MM/yyyy'}}</td>
                                        <td class="text-center">{{formation.habilitation.libelle}}</td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

      </div>
    </tf-portlet-body>
  </tf-portlet>
  
  <ng-template #noEntreprises>
    <div class="card">
      <h5 class="mb-4">Aucune Entreprise Externe</h5>
    </div>
  </ng-template>
  
  <ng-template #noHabRequired>
    <div class="card">
      <h5 class="mb-4">Aucune habilitations obligatoires pour accéder au salarie</h5>
    </div>
  </ng-template>
  <ng-template #noSecuDays>
    -
  </ng-template>


  <ng-template #noDataFound>
    <span class="no-data-label">
      Non renseigné
    </span>
  </ng-template>