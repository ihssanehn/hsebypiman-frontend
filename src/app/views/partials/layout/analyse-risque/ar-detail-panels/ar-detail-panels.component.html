<mat-expansion-panel [expanded]="isExpanded" [disabled]="isDisableToggle" >
    <mat-expansion-panel-header>
        <div class="tf-heading tf-heading--md">| 1 {{'ARS.CARD.SITE_RULES.TITLE' | translate}}</div>
    </mat-expansion-panel-header>
    <div class="row">
        <div class="col-md-12">
            <div class="tf-card-form">
                <div class="tf-heading tf-heading--sm">
                    1.1 {{'ARS.CARD.SITE_RULES.SECURITY.TITLE' | translate}}
                    <mat-slide-toggle class="pull-right" [checked]="isChecked('a_prevoir_compagnons')" disabled>
                        <small>{{'ARS.PREVOIR_COMPAGNONS.LABEL' | translate}}</small>
                    </mat-slide-toggle>
                </div>
                <div class="mt-3" *ngIf="ar.a_prevoir_compagnons">
                    <mat-form-field class="col-xl-4">
                        <mat-label>{{'ARS.DATE_ACCUEIL_SECU.LABEL' | translate}}</mat-label>
                        <input matInput [readonly]="true" class="form-control" [value]="ar.date_accueil_secu| date:'dd/MM/yyyy'">
                    </mat-form-field>
                    <mat-form-field class="col-xl-4">
                        <mat-label>{{'ARS.DATE_VALIDITE.LABEL' | translate}}</mat-label>
                        <input matInput [readonly]="true" class="form-control" [value]="ar.date_validite| date:'dd/MM/yyyy'">
                    </mat-form-field>
                    <div class="col-xl-4 mat-form-field ng-tns-c14-2 mat-primary mat-form-field-type-mat-input mat-form-field-appearance-legacy mat-form-field-can-float mat-form-field-should-float mat-form-field-has-label" formContolName="a_prevoir_compagnons">
                        <div class="mat-form-field-wrapper">
                            <div class="mat-form-field-flex">
                                <div class="mat-form-field-infix">
                                    <span class="mat-form-field-label-wrapper">
                                        <label class="mat-form-field-label">{{'ARS.AS_HORAIRES.LABEL' | translate}}</label>
                                    </span>
                                    <div class="horaire-box flex-layout mt-2">
                                        <div>
                                            <input [readonly]="true" class="form-control text-center" type="time" name="accueil_secu_time_opening" [value]="ar.accueil_secu_time_opening" />
                                        </div>
                                        <span style="padding: 1em;">- </span>
                                        <div>
                                            <input [readonly]="true" class="form-control text-center" type="time" name="accueil_secu_time_closing" [value]="ar.accueil_secu_time_closing" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-xl-4 mat-form-field ng-tns-c14-2 mat-primary mat-form-field-type-mat-input mat-form-field-appearance-legacy mat-form-field-can-float mat-form-field-should-float mat-form-field-has-label">
                        <div class="mat-form-field-wrapper">
                            <div class="mat-form-field-flex">
                                <div class="mat-form-field-infix">
                                    <span class="mat-form-field-label-wrapper">
                                        <label class="mat-form-field-label">{{'ARS.AS_DAYS.LABEL' | translate}}</label>
                                    </span>
                                    <div class="mt-2">
                                        <mat-chip-list #chipList>
                                            <mat-chip *ngFor="let as_day of ar.accueil_secu_days" class="chip-item">
                                                {{as_day}}
                                            </mat-chip>
                                        </mat-chip-list>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <mat-form-field class="col-xl-4">
                        <mat-label>{{'ARS.REALISATEUR.LABEL' | translate}}</mat-label>
                        <input class="form-control" matInput [readonly]="true" type="text" name="realisateur" [value]="ar.realisateur" />
                    </mat-form-field>
                    <mat-form-field class="col-xl-4">
                        <mat-label>{{'ARS.TEL_REALISATEUR.LABEL' | translate}}</mat-label>
                        <input class="form-control" matInput [readonly]="true" type="text" name="tel_realisateur" [value]="ar.tel_realisateur" />
                    </mat-form-field>
                </div>
            </div>
        </div>
        <div class="col-md-12">
            <div class="row">
                <div class="col-md-8">
                    <div class="tf-card-form full-height">
                        <div class="tf-heading tf-heading--sm">
                            1.2 {{'ARS.CARD.SITE_RULES.CONTACTS.TITLE' | translate}}
                        </div>
                        <div class="row mt-3">
                            <mat-form-field class="col-xl-6">
                                <mat-label>{{'ARS.CONTACT_INTERNE_SECOURS.LABEL' | translate}}</mat-label>
                                <input class="form-control" matInput [readonly]="true" type="text" name="contact_interne_secours" [value]="ar.contact_interne_secours" />
                            </mat-form-field>
                            <mat-form-field class="col-xl-6">
                                <mat-label>{{'ARS.TEL_CONTACT_INTERNE_SECOURS.LABEL' | translate}}</mat-label>
                                <input class="form-control" matInput [readonly]="true" type="text" name="tel_contact_interne_secours" [value]="ar.tel_contact_interne_secours" />
                            </mat-form-field>
                            <mat-form-field class="col-xl-6">
                                <mat-label>{{'ARS.CONTACT_CLIENT_CHEF_CHANTIER.LABEL' | translate}}</mat-label>
                                <input class="form-control" matInput [readonly]="true" type="text" name="contact_client_chef_chtr" [value]="ar.contact_client_chef_chtr" />
                            </mat-form-field>
                            <mat-form-field class="col-xl-6">
                                <mat-label>{{'ARS.TEL_CONTACT_CLIENT_CHEF_CHANTIER.LABEL' | translate}}</mat-label>
                                <input class="form-control" matInput [readonly]="true" type="text" name="tel_contact_client_chef_chtr" [value]="ar.tel_contact_client_chef_chtr" />
                            </mat-form-field>
                            <mat-form-field class="col-xl-6">
                                <mat-label>{{'ARS.CONTACT_CLIENT_HSE.LABEL' | translate}}</mat-label>
                                <input class="form-control" matInput [readonly]="true" type="text" name="contact_client_hse" [value]="ar.contact_client_hse" />
                            </mat-form-field>
                            <mat-form-field class="col-xl-6">
                                <mat-label>{{'ARS.TEL_CONTACT_CLIENT_HSE.LABEL' | translate}}</mat-label>
                                <input class="form-control" matInput [readonly]="true" type="text" name="tel_contact_client_hse" [value]="ar.tel_contact_client_hse" />
                            </mat-form-field>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="tf-card-form full-height">
                        <div class="tf-heading tf-heading--sm">
                            1.3 {{'ARS.CARD.SITE_RULES.CONDITIONS.TITLE' | translate}}
                        </div>
                        <div class="row mt-3">
                            <div class="col-xl-12 col-md-12 mat-form-field ng-tns-c14-2 mat-primary mat-form-field-type-mat-input mat-form-field-appearance-legacy mat-form-field-can-float mat-form-field-should-float mat-form-field-has-label" formContolName="a_prevoir_compagnons">
                                <div class="mat-form-field-wrapper">
                                    <div class="mat-form-field-flex">
                                        <div class="mat-form-field-infix">
                                            <span class="mat-form-field-label-wrapper">
                                                <label class="mat-form-field-label">{{'ARS.HORAIRES.LABEL' | translate}}</label>
                                            </span>
                                            <div class="horaire-box flex-layout mt-2">
                                                <div>
                                                    <input [readonly]="true" class="form-control text-center" type="time" name="heure_ouverture" [value]="ar.heure_ouverture" />
                                                </div>
                                                <span style="padding: 1em;">- </span>
                                                <div>
                                                    <input [readonly]="true" class="form-control text-center" type="time" name="heure_fermeture" [value]="ar.heure_fermeture" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <mat-form-field class="col-xl-12 col-md-12">
                                <mat-label>{{'ARS.COURANT.LABEL' | translate}}</mat-label>
                                <input class="form-control" matInput [readonly]="true" type="text" name="courant_dispo" [value]="ar.courant_dispo" />
                            </mat-form-field>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6" *ngFor="let zoneType of ar.zonesGrouped |  keyvalue; let i = index">
            <div class="tf-card-form full-height">
                <div class="tf-heading tf-heading--sm">
                    1.{{i+4}} {{zoneType.key}}
                </div>
                <div class="form-row row mt-3" *ngIf="zoneType.value.length > 0; else chantierNonConcerne">
                    <div class="col-xl-6 col-md-12" *ngFor="let zone of zoneType.value">
                        <mat-checkbox [value]="zone.id" disabled [checked]="true">{{zone.libelle}}</mat-checkbox>
                    </div>
                </div>
            </div>
        </div>
    </div>
</mat-expansion-panel>

<mat-expansion-panel [expanded]="isExpanded" [disabled]="isDisableToggle">
    <mat-expansion-panel-header>
        <div class="tf-heading tf-heading--md">| 2 {{'ARS.CARD.RISKS.TITLE' | translate}}</div>
    </mat-expansion-panel-header>
    <div class="row">
        <div class="col-md-12">
            <div class="tf-card-form" *ngIf="ar.risksTree.length > 0; else noRisk ">
                <div class="tf-heading tf-heading--xs">
                    {{'ARS.CARD.RISKS.SUBLABEL' | translate}}
                </div>
                <div class="row form-row"></div>

                <table mat-table [dataSource]="ar.risksTree" >

                    <ng-container matColumnDef="risks">
                        <th mat-header-cell *matHeaderCellDef> {{'ARS.FORM.RISKS' | translate}} </th>
                        <td mat-cell *matCellDef="let element"> {{element.libelle}} </td>
                    </ng-container>

                    <ng-container matColumnDef="actions">
                        <th mat-header-cell *matHeaderCellDef> {{'ARS.FORM.ACTION' | translate}} </th>
                        <td mat-cell *matCellDef="let element">
                            <div class="m-2" *ngFor="let risk of element.risques" [hidden]="element.risques.length == 0">
                                <mat-checkbox disabled [value]="risk.id" [checked]="true">{{risk.libelle}}</mat-checkbox>
                            </div>
                            <span [hidden]="element.risques.length > 0">
                                -
                            </span>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="comments">
                        <th mat-header-cell *matHeaderCellDef> {{'ARS.FORM.COMMENT' | translate}} </th>
                        <td mat-cell *matCellDef="let element">
                            {{element.ar_cat_risque[0]?.commentaire}}
                        </td>
                    </ng-container>


                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                </table>

            </div>
        </div>
    </div>
</mat-expansion-panel>
<div class="row">
    <div class="col-6">
        <mat-expansion-panel [expanded]="isExpanded" [disabled]="isDisableToggle">
            <mat-expansion-panel-header>
                <div class="tf-heading tf-heading--md">| 3 {{'ARS.CARD.EQUIPEMENT.TITLE' | translate}}</div>
            </mat-expansion-panel-header>
            <div class="row">
                <div class="col-md-12">
                    <div class="tf-card-form">
                        <div class="form-row" *ngIf="ar.equipements.length > 0; else noEquipement">
                            <div class="col-12" *ngFor="let equipement of ar.equipements">
                                <mat-checkbox disabled [value]="equipement.id" [checked]="true">{{equipement.libelle}}</mat-checkbox>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </mat-expansion-panel>
    </div>
    <div class="col-6">
        <mat-expansion-panel [expanded]="isExpanded" [disabled]="isDisableToggle">
            <mat-expansion-panel-header>
                <div class="tf-heading tf-heading--md">| 4 {{'ARS.CARD.MONITORING.TITLE' | translate}}</div>
            </mat-expansion-panel-header>
            <div class="row">
                <div class="col-md-12">
                    <div class="tf-card-form">
                        <div class="tf-heading tf-heading--sm">
                            {{'ARS.CARD.MONITORING.WORKS.TITLE' | translate}}<mat-slide-toggle class="pull-right" [checked]="isChecked('a_signer_registre_travaux')" disabled></mat-slide-toggle>
                        </div>
                        <div class="row mt-3" [hidden]="!ar.a_signer_registre_travaux">
                            <div class="row form-row col-md-12">
                                <mat-radio-group [value]="ar.registre_signing_period" class="col-xl-12 col-md-12 mat-form-field ng-tns-c14-2 mat-primary mat-form-field-type-mat-input mat-form-field-appearance-legacy mat-form-field-can-float mat-form-field-should-float mat-form-field-has-label">
                                    <div class="mat-form-field-wrapper">
                                        <div class="mat-form-field-flex">
                                            <div class="mat-form-field-infix">
                                                <span class="mat-form-field-label-wrapper">
                                                    <label class="mat-form-field-label">{{'ARS.ASIGNER.LABEL' | translate}}</label>
                                                </span>
                                                <div class="form-control mat-input-element mat-radio-box" style="justify-content: end">
                                                    <mat-radio-button disabled value="quotidiennement">{{'ARS.QUOTIDIENNEMENT.LABEL' | translate}}</mat-radio-button>
                                                    <mat-radio-button disabled value="par 1/2 journée">{{'ARS.DEMIJOURNEE.LABEL' | translate}}</mat-radio-button>
                                                    <mat-radio-button disabled value="toutes les 2h">{{'ARS.DEUXHEURES.LABEL' | translate}}</mat-radio-button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </mat-radio-group>
                            </div>
                            <div class="row form-row col-md-12">
                                <mat-form-field class="col-xl-4">
                                    <mat-label>{{'ARS.FORM.REGISTRAR' | translate}}</mat-label>
                                    <input class="form-control" matInput [readonly]="true" type="text" name="nom_charge_registre" [value]="ar.nom_charge_registre" />
                                </mat-form-field>
                                <mat-form-field class="col-xl-4">
                                    <mat-label>{{'COMMON.PHONENUMBER.LABEL' | translate}}</mat-label>
                                    <input class="form-control" matInput [readonly]="true" type="text" name="tel_charge_registre" [value]="ar.tel_charge_registre" />
                                </mat-form-field>
                                <mat-form-field class="col-xl-4">
                                    <mat-label>{{'COMMON.ADRESS.LABEL' | translate}}</mat-label>
                                    <input class="form-control" matInput [readonly]="true" type="text" name="adresse_charge_registre" [value]="ar.adresse_charge_registre" />
                                </mat-form-field>
                                <mat-form-field class="col-xl-4">
                                    <mat-label>{{'COMMON.CITY.LABEL' | translate}}</mat-label>
                                    <input class="form-control" matInput [readonly]="true" type="text" name="ville_charge_registre" [value]="ar.ville_charge_registre" />
                                </mat-form-field>
                                <mat-form-field class="col-xl-4">
                                    <mat-label>{{'COMMON.POSTCODE.LABEL' | translate}}</mat-label>
                                    <input matInput [readonly]="true" class="form-control" type="text" name="codepostal_charge_registre" [value]="ar.codepostal_charge_registre" />
                                </mat-form-field>
                                <mat-form-field class="col-xl-4">
                                    <mat-label>{{'COMMON.COUNTRY.LABEL' | translate}}</mat-label>
                                    <input class="form-control" matInput [readonly]="true" type="text" name="pays_charge_registre" [value]="ar.pays_charge_registre" />
                                </mat-form-field>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="tf-card-form">
                        <div class="tf-heading tf-heading--sm">
                            {{'ARS.CARD.MONITORING.MARKUP.TITLE' | translate}}<mat-slide-toggle class="pull-right" [checked]="isChecked('a_prevoir_balisage')" disabled></mat-slide-toggle>
                        </div>
                    </div>
                </div>
            </div>
        </mat-expansion-panel>
    </div>
</div>




<ng-template #noEquipement>
    {{'ARS.CARD.EQUIPEMENT.NO_EQUIPEMENT' | translate}}
</ng-template>
<ng-template #chantierNonConcerne>
	<div class="mt-3">{{'ARS.CARD.SITE_RULES.SITE_NOT_CONCERNED' | translate}}</div>
</ng-template>
<ng-template #noRisk>
	<div class="tf-card-form">
		<div class="tf-heading tf-heading--xs">
			{{'ARS.CARD.RISKS.NO_RISK' | translate}}
		</div>
	</div>
</ng-template>