<ng-container [formGroup]="arForm">

	<div class="row">
		<div class="col-md-6">
			<div class="tf-card-form">
				<div class="tf-heading tf-heading--sm">
					1.4 {{'ARS.FORM.PARKINGBLOCK.TITLE' | translate}}
				</div>
				<div class="form-row">
					<div class="col-xl-5">
						<mat-checkbox formControlName="zone_part">Pas de zone particulière</mat-checkbox>
					</div>
					<div class="col-xl-5">
						<mat-checkbox formControlName="parking_spe_chtr">Sur parking spécial chantier</mat-checkbox>
					</div>
				</div>
				<div class="form-row">
					<div class="col-xl-5">
						<mat-checkbox formControlName="parking_salarie">Sur parking salarié</mat-checkbox>
					</div>
					<div class="col-xl-5">
						<mat-checkbox formControlName="stat_arr">Stationnement en marche arrière</mat-checkbox>
					</div>
				</div>
			</div>
		</div>
		<div class="col-md-6">
			<div class="tf-card-form">
				<div class="tf-heading tf-heading--sm">
					1.5 {{'ARS.FORM.STOCKBLOCK.TITLE' | translate}}
				</div>
				<div class="form-row">
					<div class="col-xl-5">
						<mat-checkbox formControlName="algeco_cvti">ALGÉCO CVTI fermé d’un cadenas</mat-checkbox>
					</div>
					<div class="col-xl-5">
						<mat-checkbox formControlName="zone_surv_balisee">Zone surveillée balisée dans le bâtiment</mat-checkbox>
					</div>
				</div>
				<div class="form-row">
					<div class="col-xl-5">
						<mat-checkbox formControlName="zone_ext_non_surv">Zone extérieure sans surveillance</mat-checkbox>
					</div>
					<div class="col-xl-5">
						<mat-checkbox formControlName="prevoir_balisage_materiel">Prévoir balisage pour le matériel</mat-checkbox>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="tf-heading tf-heading--md">| 2 {{'ARS.FORM.RISKBLOCK.TITLE' | translate}}</div>
	<div class="row">
		<div class="col-md-12">
			<div class="tf-card-form">
				<div class="tf-heading tf-heading--sm">
					{{'ARS.FORM.RISKBLOCK.MSG' | translate}}
				</div>
				<div class="row form-row"></div>

				<table mat-table [dataSource]="risksList">

					<ng-container matColumnDef="risks">
						<th mat-header-cell *matHeaderCellDef> {{'ARS.FORM.RISKS' | translate}} </th>
						<td mat-cell *matCellDef="let element"> {{element.libelle}} </td>
					</ng-container>

					<ng-container matColumnDef="actions">
						<th mat-header-cell *matHeaderCellDef> {{'ARS.FORM.ACTION' | translate}} </th>
						<td mat-cell *matCellDef="let element">
							<div class="m-2" *ngFor="let risk of element.risques">
								<mat-checkbox [value]="risk.id" (change)="onRiskCheckChange($event)" [checked]="onRiskIsChecked(risk.id)">{{risk.libelle}}</mat-checkbox>
							</div>
						</td>
					</ng-container>

					<!-- Weight Column -->
					<ng-container matColumnDef="comments">
						<th mat-header-cell *matHeaderCellDef> {{'ARS.FORM.COMMENT' | translate}} </th>
						<td mat-cell *matCellDef="let element">
							<div class="full-height">
								<textarea class="form-control no_border full-height" (change)="onCommentCheckChange(element.id,$event)" [value]="getCommentValue(element.id)" placeholder="Saisir ici"></textarea>
							</div>
						</td>
					</ng-container>


					<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
					<tr mat-row *matRowDef="let row; columns: displayedColumns;" ></tr>
				</table>

			</div>
		</div>
	</div>

	<div class="tf-heading tf-heading--md">| 3 {{'ARS.FORM.EQBLOCK.TITLE' | translate}}</div>
	<div class="row">
		<div class="col-md-12">
			<div class="tf-card-form">
				<div class="form-row">
					<div class="col-md-2" *ngFor="let epi of epiList">
						<mat-checkbox [value]="epi.id" (change)="onEpiCheckChange($event)" [checked]="onEpiIsChecked(epi.id)">{{epi.libelle}}</mat-checkbox>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="tf-heading tf-heading--md">| 4 {{'ARS.FORM.MWBLOCK.TITLE' | translate}}</div>
	<div class="row">
		<div class="col-md-6">
			<div class="tf-card-form">
				<div class="tf-heading tf-heading--sm">
					{{'ARS.FORM.MWBLOCK.WORKREGISTER.TITLE' | translate}}
				</div>

				<div class="row form-row">
					<mat-radio-group formControlName="a_signer_registre_travaux" class="col-xl-12 col-md-12 mat-form-field ng-tns-c14-2 mat-primary mat-form-field-type-mat-input mat-form-field-appearance-legacy mat-form-field-can-float mat-form-field-should-float mat-form-field-has-label">
						<div class="mat-form-field-wrapper">
							<div class="mat-form-field-flex">
								<div class="mat-form-field-infix col-md-3">
									<span class="mat-form-field-label-wrapper">
										<label class="mat-form-field-label"></label>
									</span>
									<div class="form-control mat-input-element mat-radio-box">
										<mat-radio-button value="1">Oui</mat-radio-button>
										<mat-radio-button value="0">Non</mat-radio-button>
									</div>
								</div>
								<label>{{'ARS.FORM.MWBLOCK.WORKREGISTER.MSG' | translate}}</label>
							</div>
						</div>
					</mat-radio-group>
				</div>

				<div class="row form-row" *ngIf="isChecked('a_signer_registre_travaux')">
					<mat-radio-group  formControlName="registre_signing_period"
					class="col-xl-12 col-md-12 mat-form-field ng-tns-c14-2 mat-primary mat-form-field-type-mat-input mat-form-field-appearance-legacy mat-form-field-can-float mat-form-field-should-float mat-form-field-has-label">
						<div class="mat-form-field-wrapper">
							<div class="mat-form-field-flex">
								<div class="mat-form-field-infix">
									<span class="mat-form-field-label-wrapper">
										<label class="mat-form-field-label">{{'ARS.ASIGNER.LABEL' | translate}}</label>
									</span>
									<div class="form-control mat-input-element mat-radio-box" style="justify-content: end">
										<mat-radio-button value="quotidiennement">{{'ARS.QUOTIDIENNEMENT.LABEL' | translate}}</mat-radio-button>
										<mat-radio-button value="par 1/2 journée">{{'ARS.DEMIJOURNEE.LABEL' | translate}}</mat-radio-button>
										<mat-radio-button value="toute les 2h">{{'ARS.DEUXHEURES.LABEL' | translate}}</mat-radio-button>
									</div>
								</div>
							</div>
						</div>
					</mat-radio-group>
				</div>

				<div class="row form-row" *ngIf="isChecked('a_signer_registre_travaux')">
					<mat-form-field class="col-xl-7">
						<mat-label>{{'ARS.FORM.REGISTRAR' | translate}}</mat-label>
						<input class="form-control" matInput type="text" name="nom_charge_registre" formControlName="nom_charge_registre" placeholder="Saisir ici" [required]="isFieldRequired('nom_charge_registre')" />
						<mat-error *ngIf="isControlHasError('nom_charge_registre','required')">
							<strong>{{ 'AUTH.VALIDATION.REQUIRED_FIELD' | translate }}</strong>
						</mat-error>
					</mat-form-field>
					<mat-form-field class="col-xl-5">
						<mat-label>{{'COMMON.PHONENUMBER.LABEL' | translate}}</mat-label>
						<input class="form-control" matInput  pattern="[0-9+ ]*" type="tel" name="tel_charge_registre" formControlName="tel_charge_registre" placeholder="Saisir ici" [required]="isFieldRequired('tel_charge_registre')"/>
						<mat-error *ngIf="isControlHasError('tel_charge_registre','required')">
							<strong>{{ 'AUTH.VALIDATION.REQUIRED_FIELD' | translate }}</strong>
						</mat-error>
					</mat-form-field>
				</div>

				<div class="row form-row" *ngIf="isChecked('a_signer_registre_travaux')">
					<mat-form-field class="col-xl-7">
						<mat-label>{{'COMMON.ADRESS.LABEL' | translate}}</mat-label>
						<input class="form-control" matInput type="text" name="adresse_charge_registre" formControlName="adresse_charge_registre" placeholder="Saisir ici" [required]="isFieldRequired('adresse_charge_registre')"/>
						<mat-error *ngIf="isControlHasError('adresse_charge_registre','required')">
							<strong>{{ 'AUTH.VALIDATION.REQUIRED_FIELD' | translate }}</strong>
						</mat-error>
					</mat-form-field>
					<mat-form-field class="col-xl-5">
						<mat-label>{{'COMMON.CITY.LABEL' | translate}}</mat-label>
						<input class="form-control" matInput type="text" name="ville_charge_registre" formControlName="ville_charge_registre" placeholder="Saisir ici" [required]="isFieldRequired('ville_charge_registre')"/>
						<mat-error *ngIf="isControlHasError('ville_charge_registre','required')">
							<strong>{{ 'AUTH.VALIDATION.REQUIRED_FIELD' | translate }}</strong>
						</mat-error>
					</mat-form-field>
				</div>

				<div class="row form-row" *ngIf="isChecked('a_signer_registre_travaux')">
					<mat-form-field class="col-xl-7">
						<mat-label>{{'COMMON.POSTCODE.LABEL' | translate}}</mat-label>
						<input matInput class="form-control" type="text" name="codepostal_charge_registre" formControlName="codepostal_charge_registre" placeholder="Saisir ici" [required]="isFieldRequired('codepostal_charge_registre')" />
						<mat-error *ngIf="isControlHasError('codepostal_charge_registre','required')">
							<strong>{{ 'AUTH.VALIDATION.REQUIRED_FIELD' | translate }}</strong>
						</mat-error>
					</mat-form-field>
					<mat-form-field class="col-xl-5">
						<mat-label>{{'COMMON.COUNTRY.LABEL' | translate}}</mat-label>
						<input class="form-control" matInput type="text" name="pays_charge_registre" formControlName="pays_charge_registre" placeholder="Saisir ici" [required]="isFieldRequired('pays_charge_registre')" />
						<mat-error *ngIf="isControlHasError('pays_charge_registre','required')">
							<strong>{{ 'AUTH.VALIDATION.REQUIRED_FIELD' | translate }}</strong>
						</mat-error>
					</mat-form-field>
				</div>

			</div>
		</div>

		<div class="col-md-6">
			<div class="tf-card-form">
				<div class="tf-heading tf-heading--sm">
					{{'ARS.FORM.MWBLOCK.SUBTITLE2' | translate}}
				</div>

				<div class="row form-row">
					<mat-radio-group formControlName="a_prevoir_balisage" class="col-xl-12 col-md-12 mat-form-field ng-tns-c14-2 mat-primary mat-form-field-type-mat-input mat-form-field-appearance-legacy mat-form-field-can-float mat-form-field-should-float mat-form-field-has-label">
						<div class="mat-form-field-wrapper">
							<div class="mat-form-field-flex">
								<div class="mat-form-field-infix col-md-3">
									<span class="mat-form-field-label-wrapper">
										<label class="mat-form-field-label"></label>
									</span>
									<div class="form-control mat-input-element mat-radio-box">
										<mat-radio-button value="1">Oui</mat-radio-button>
										<mat-radio-button value="0">Non</mat-radio-button>
									</div>
								</div>
								<label>{{'ARS.FORM.MWBLOCK.WORKREGISTER.MSG' | translate}}</label>
							</div>
						</div>
					</mat-radio-group>
				</div>

				<div class="row form-row" *ngIf="isChecked('a_prevoir_balisage')">
					<mat-form-field class="col-xl-7">
						<mat-label>{{'ARS.FORM.CVTI_RESPONSIBLE' | translate}}</mat-label>
						<input class="form-control" matInput type="text" name="nom_ca_cvti" formControlName="nom_ca_cvti" placeholder="Saisir ici" [required]="isFieldRequired('nom_ca_cvti')" />
						<mat-error *ngIf="isControlHasError('nom_ca_cvti','required')">
							<strong>{{ 'AUTH.VALIDATION.REQUIRED_FIELD' | translate }}</strong>
						</mat-error>
					</mat-form-field>
					<mat-form-field class="col-xl-5">
						<mat-label>{{'COMMON.PHONENUMBER.LABEL' | translate}}</mat-label>
						<input class="form-control" matInput pattern="[0-9+ ]*" type="tel" name="tel_ca_cvti" formControlName="tel_ca_cvti" placeholder="Saisir ici" [required]="isFieldRequired('tel_ca_cvti')" />
						<mat-error *ngIf="isControlHasError('tel_ca_cvti','required')">
							<strong>{{ 'AUTH.VALIDATION.REQUIRED_FIELD' | translate }}</strong>
						</mat-error>
					</mat-form-field>
				</div>

				<div class="row form-row" *ngIf="isChecked('a_prevoir_balisage')">
					<mat-form-field class="col-xl-7">
						<mat-label>{{'ARS.FORM.CA_ASSISTANT' | translate}}</mat-label>
						<input class="form-control" matInput type="text" name="assistant_ca" formControlName="assistant_ca" placeholder="Saisir ici" [required]="isFieldRequired('assistant_ca')" />
						<mat-error *ngIf="isControlHasError('assistant_ca','required')">
							<strong>{{ 'AUTH.VALIDATION.REQUIRED_FIELD' | translate }}</strong>
						</mat-error>
					</mat-form-field>
					<mat-form-field class="col-xl-5">
						<mat-label>{{'COMMON.PHONENUMBER.LABEL' | translate}}</mat-label>
						<input class="form-control" matInput pattern="[0-9+ ]*" type="tel" name="tel_assistant_ca" formControlName="tel_assistant_ca" placeholder="Saisir ici" [required]="isFieldRequired('tel_assistant_ca')" />
						<mat-error *ngIf="isControlHasError('tel_assistant_ca','required')">
							<strong>{{ 'AUTH.VALIDATION.REQUIRED_FIELD' | translate }}</strong>
						</mat-error>
					</mat-form-field>
				</div>
			</div>
		</div>
	</div>

</ng-container>
